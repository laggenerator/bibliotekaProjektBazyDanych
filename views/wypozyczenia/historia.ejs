<div class="wypozyczenia-container">
  <h1>Historia wypożyczeń</h1>

  <% if (wypozyczenia.length === 0) { %>
  <div class="brak-wypozyczen">
    <p>Nie masz jeszcze żadnych wypożyczeń</p>
  </div>
  <% } else { %>
  <div class="wypozyczenia-lista">
    <% wypozyczenia.forEach(function(wypozyczenie) { %>
    <div
      class="wypozyczenie-item <%= wypozyczenie.wszystkie_oddane ? 'zakonczone' : 'aktywne' %>"
    >
      <div class="wypozyczenie-header">
        <h3>Wypożyczenie #<%= wypozyczenie.id_wypozyczenia %></h3>
        <div class="wypozyczenie-daty">
          <span class="data-poczatku">
            Data wypożyczenia: <%= new
            Date(wypozyczenie.poczatek).toLocaleDateString('pl-PL') %>
          </span>
          <span class="data-deadline">
            Termin zwrotu: <%= new
            Date(wypozyczenie.deadline).toLocaleDateString('pl-PL') %>
          </span>
        </div>
      </div>

      <div class="wypozyczenie-ksiazki">
        <h4>Książki:</h4>
        <ul>
          <% wypozyczenie.tytuly.forEach(function(tytul, index) { %>
          <li>
            <strong><%= tytul %></strong>
            <% if (wypozyczenie.autorzy && wypozyczenie.autorzy[index]) { %> -
            <%= wypozyczenie.autorzy[index] %> <% } %>
          </li>
          <% }); %>
        </ul>
      </div>

      <div class="wypozyczenie-status">
        <span class="status-info">
          <%= wypozyczenie.status === 'Anulowane' ? 'ANULOWANE' :
          wypozyczenie.status === 'Zwrócone' ? 'ZAKOŃCZONE' : 'AKTYWNE' %>
        </span>
        <span class="status-ksiazki">
          (<%= wypozyczenie.liczba_oddanych || 0 %>/<%=
          wypozyczenie.laczna_liczba_ksiazek %> oddanych)
        </span>
      </div>
    </div>
    <% }); %>
  </div>
  <% } %>
</div>
